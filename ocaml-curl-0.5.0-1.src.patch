diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ocurl/Makefile.in src/ocurl/Makefile.in
--- origsrc/ocurl/Makefile.in	2004-07-19 12:06:31.000000000 -0500
+++ src/ocurl/Makefile.in	2008-07-17 19:37:12.812500000 -0500
@@ -28,7 +28,7 @@
 CURLBCOBJS	= $(CURLOBJS:.cmx=.cmo)
 
 CURLFLAGS	= -ccopt @CURLFLAGS@
-CURLCLIBS	= -cclib -lcurl-helper -cclib "@CURLLIBS@"
+CURLCLIBS	= -cclib -lcurl-helper -cclib "@CURLFLAGS@ @CURLLIBS@"
 
 ifeq (@OCAMLBEST@,opt)
 TARGETS		= curl.cma curl.cmxa libcurl-helper.a
@@ -46,7 +46,7 @@
 		(cd examples; $(MAKE))
 
 curl.cma:	$(CURLBCOBJS) libcurl-helper.a
-		$(OCBYTE) -custom -a $(FLAGS) $(CURLFLAGS) -o $@ $(CURLBCOBJS) $(CURLCLIBS)
+		$(OCBYTE) -custom -a $(FLAGS) -dllib dllcurl-helper $(CURLFLAGS) -o $@ $(CURLBCOBJS) $(CURLCLIBS)
 
 curl.cmxa:	$(CURLOBJS) libcurl-helper.a
 		$(OCOPT) -a $(FLAGS) $(CURLFLAGS) $(LIBS) $(CURLOBJS) -o $@ $(CURLCLIBS)
@@ -61,16 +61,15 @@
 		$(OCBYTE) -c $(FLAGS) $< -o $@
 
 libcurl-helper.a:	$(CURLHELPEROBJS)
-		ar crus libcurl-helper.a $(CURLHELPEROBJS)
-		ranlib libcurl-helper.a
+		ocamlmklib -o curl-helper $(CURLHELPEROBJS) @CURLFLAGS@
 
 .c.o:
 		$(CC) -c $(CFLAGS) $(CAMLINCDIR) $< -o $@
 
 install:
 ifeq ($(FINDLIB),ocamlfind)
-		ocamlfind install curl META $(wildcard *.cmi) \
-			 $(wildcard *.a) $(wildcard *.cma) $(wildcard *.cmxa)
+		ocamlfind install curl META dllcurl-helper.so $(TARGETS) \
+			curl.a curl.cmi curl.mli
 else
 		mkdir -p $(INSTALLDIR)
 		$(INSTALLDATA) curl.cma $(INSTALLDIR)
